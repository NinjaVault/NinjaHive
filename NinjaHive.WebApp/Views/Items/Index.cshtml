@using NinjaHive.WebApp.Controllers
@using NinjaHive.WebApp.Extensions

<div class="row">
    <div class="page-header">
        <h2>Equipment Items</h2>

        @{ var createUrl = Url.Action<ItemsController>(c => c.Create()); }
        <a class="btn btn-primary" href="@createUrl" role="button">
            Create
        </a>
        <div class="btn-group" role="group">
            <a class="btn btn-warning" href="#" role="button" disabled="disabled">Edit</a>
            <a class="btn btn-danger" href="#" role="button" disabled="disabled">Delete</a>
        </div>
    </div>

    <div id="ninjahive-content-container">
        <div class="loading">
            @Html.Partial("General/_LoadingPartial")
        </div>
        <div id="ninjahive-content">

        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(function() {
            $("#ninjahive-content").empty();
            $("#ninjahive-content-container .loading").show();

            var options = {
                @{ var getUrl = Url.Action<ItemsController>(c => c.GetGameItems()); }
                url: "@getUrl",
                cache: false,
                dataType: "html",
                success: function(responseData) {
                    $("#ninjahive-content").html(responseData);
                },
                error: function() {
                    $("#ninjahive-content").html('@Html.Partial("General/_AjaxErrorPartial")'); //TODO: accept newlines Html.Raw?
                },
                complete: function() {
                    $("#ninjahive-content-container .loading").hide();
                }
            };

            $.ajax(options);
        });
    </script>
}